<div id="listings">
    
    <% listings.forEach((listing) => { %>

        <div class="listing-card">
            
            <div class="listing-card-top">
                
                <div class="listing-image-div">
                    <img class="listing-image" alt="<%=listing.name%>" src="<%=listing.image%>" />
                </div>
                
                <div class="listing-info-div">
                
                    <h3><%= listing.name %></h3>
                    <h4>Price: $<%= listing.price %></h4>
                    <p>Sold by <%= listing.seller %></p> <!-- change to name of seller -->
                    <ul>
                        <li>Quantity available: <%= listing.quantity %></li>
                        <li>From: <%= listing.from %></li>
                        <li><%= listing.info %></li>
                    </ul>
                </div>

            </div>

            <div id="listing-buttons">
            
                <% if (user) { %>
                    
                    <!-- grocer viewing his listings -->
                    <% if (user.account === "grocer" && grocer) { %>
                        <!-- need to add logic so you can only change your own listing
                         this is done through the groceries route -->
                        <form action="/groceries/<%=listing._id%>/edit" method="GET">
                            <button type="submit">Edit <%= listing.name %></button>
                        </form>
                        <form action="/groceries/<%=listing._id%>" method="GET">
                            <button type="submit">View <%= listing.name %></button>
                        </form>
                    
                    <!-- shopper viewing a listing -->
                    <% } else if (user.account === "shopper") { %>
                        
                        <form action="" method="GET">
                            <button type="submit">Add <%= listing.name %> to cart</button>
                        </form>
                        <form action="/market/item/<%=listing._id%>/shop" method="GET">
                            <button type="submit">View <%= listing.name %></button>
                        </form>
                    
                    <!-- grocer viewing a listing without changing -->
                    <% } else { %>
                    
                        <form action="/market/item/<%=listing._id%>/shop" method="GET">
                            <button type="submit">View <%= listing.name %></button>
                        </form>

                    <% } %>
                
                <!-- user not signed in viewing items -->
                <% } else { %>

                    <form action="/market/item/<%=listing._id%>" method="GET">
                        <button type="submit">View <%= listing.name %></button>
                    </form>

                <% } %>

            </div>

        </div>

    <% }) %>
</div>